{"ast":null,"code":"var _jsxFileName = \"/Users/mahmood/Desktop/PROJECT/frontend/hotspot-map/src/components/mymap.jsx\";\nimport React, { Component } from 'react';\nimport { Marker, MapContainer, GeoJSON, TileLayer, Tooltip } from \"react-leaflet\";\nimport county_ca from './../data/county_ca.json';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport data from './../data/markers.json';\nimport icon from './red-pin.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet DefaultIcon = L.icon({\n  iconUrl: icon,\n  iconSize: [20, 20],\n  //iconAnchor:[5,10],\n  popupAnchor: [5, 5]\n});\nL.Marker.prototype.options.icon = DefaultIcon;\nvar datainfo = [];\n\nclass MyMap extends Component {\n  constructor() {\n    super();\n\n    this.getColor = n => {\n      if (n > 2) {\n        return \"red\";\n      } else {\n        return \"blue\";\n      }\n    };\n\n    this.countyStyle = {\n      fillColor: \"blue\",\n      fillOpacity: .6,\n      color: \"black\",\n      weight: 0.6\n    };\n\n    this.onEachCounty = (county, layer) => {\n      const countyName = county.properties.NAME;\n      layer.bindTooltip(`${countyName}`); // county name display.\n\n      layer.on('click', function (e) {\n        document.getElementById(\"info\").style.visibility = \"visible\";\n        document.getElementById(\"info\").innerHTML = `<h2 style='text-align:center'>${countyName}</h2><strong style='padding-left:15px'>Prisons:</strong><br>`; // document.getElementById(\"info\").innerHTML = \"Prisons: \" + \"<br>\" ;\n\n        var exist = false;\n        var i = 0;\n\n        for (i = 0; i < datainfo.length; i++) {\n          if (datainfo[i].county === `${countyName}`) {\n            exist = true;\n          }\n        }\n\n        if (exist) {\n          for (var j = 0; j < datainfo.length; j++) {\n            if (datainfo[j].county === `${countyName}`) {\n              document.getElementById(\"info\").innerHTML += \"<li style='padding-left:25px'>\" + datainfo[j].name + \"  (City: \" + datainfo[j].city + \")</li>\";\n            }\n          }\n        } else {\n          document.getElementById(\"info\").innerHTML += \"<span style='padding-left:25px'>No prisons to show<span>\";\n        }\n\n        var elmnt = document.getElementById(\"info\");\n        elmnt.scrollIntoView({\n          behavior: \"smooth\"\n        });\n      });\n\n      if (county.properties.COUNTYFP > 34) {\n        layer.options.fillColor = \"yellow\";\n      }\n    };\n\n    this.handlecheck = event => {\n      if (document.getElementById('chkbx').checked) {\n        this.setState({\n          selected: !this.state.selected,\n          check: 1\n        });\n      } else if (!document.getElementById('chkbx').checked) {\n        this.setState({\n          check: 0\n        });\n      }\n    };\n\n    this.prisonPrint = e => {\n      document.getElementById(\"info\").style.visibility = \"visible\";\n      document.getElementById(\"info\").innerHTML = \"<h2 style='text-align:center'>\" + e.target.options.children.props.children[1] + \"<h2>\";\n      var index = 0;\n\n      for (var i = 0; i < datainfo.length; i++) {\n        if (datainfo[i].name === e.target.options.children.props.children[1]) {\n          index = i;\n        }\n      }\n\n      document.getElementById(\"info\").innerHTML += \"<strong style='padding-Left: 10px'>County: </strong>\" + datainfo[index].county + \"<br> <strong style='padding-Left: 10px'>City:</strong>\" + datainfo[index].city;\n      var elmnt = document.getElementById(\"info\");\n      elmnt.scrollIntoView({\n        behavior: \"smooth\"\n      });\n    };\n\n    this.state = {\n      locations: [],\n      hovered: false,\n      check: false\n    };\n  }\n\n  componentDidMount() {\n    window.onbeforeunload = function () {\n      window.scrollTo(0, 0);\n    }; // arrange data for marking and popups\n\n\n    datainfo = [];\n\n    for (var i = 0; i < data.length; i++) {\n      this.state.locations.push({\n        \"name\": data[i].p_name,\n        \"position\": [data[i].latitude, data[i].longitude],\n        \"city\": data[i].city,\n        \"county\": data[i].county\n      });\n      datainfo.push({\n        \"name\": data[i].p_name,\n        \"position\": [data[i].latitude, data[i].longitude],\n        \"city\": data[i].city,\n        \"county\": data[i].county\n      });\n    }\n  }\n\n  render() {\n    const {\n      check\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '70%',\n          margin: \"auto\",\n          display: \"block\",\n          overflow: \"auto\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"chkbx\",\n          onChange: this.handlecheck.bind(this),\n          type: \"checkbox\",\n          style: {\n            float: \"right\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 17\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            float: \"right\",\n            fontSize: \"14px\"\n          },\n          children: \"Show Tile Layer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 116\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n        style: {\n          border: \"2px solid #393F44\",\n          height: \"72vh\",\n          width: '70%',\n          margin: 'auto'\n        },\n        zoom: 6,\n        center: [37.5, -120],\n        scrollWheelZoom: true,\n        children: [/*#__PURE__*/_jsxDEV(GeoJSON, {\n          style: this.countyStyle,\n          data: county_ca.features,\n          onEachFeature: this.onEachCounty,\n          onMouseMove: this.handleMove,\n          onMouseLeave: this.handleLeave\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }, this), check ? /*#__PURE__*/_jsxDEV(TileLayer, {\n          style: {\n            visibility: \"hidden\"\n          },\n          attribution: \"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n          url: \"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 31\n        }, this) : \"\", this.state.locations.map((location, idx) =>\n        /*#__PURE__*/\n        // marker and detailed display.\n        _jsxDEV(Marker, {\n          eventHandlers: {\n            click: e => {\n              this.prisonPrint(e);\n            }\n          },\n          position: location.position,\n          children: /*#__PURE__*/_jsxDEV(Tooltip, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Prison: \\xA0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 33\n            }, this), location.name, /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 39\n              }, this), \"County: \\xA0\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 33\n            }, this), location.county, /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 39\n              }, this), \"City: \\xA0\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 33\n            }, this), location.city]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 29\n          }, this)\n        }, `marker-${idx}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default MyMap;","map":{"version":3,"sources":["/Users/mahmood/Desktop/PROJECT/frontend/hotspot-map/src/components/mymap.jsx"],"names":["React","Component","Marker","MapContainer","GeoJSON","TileLayer","Tooltip","county_ca","L","data","icon","DefaultIcon","iconUrl","iconSize","popupAnchor","prototype","options","datainfo","MyMap","constructor","getColor","n","countyStyle","fillColor","fillOpacity","color","weight","onEachCounty","county","layer","countyName","properties","NAME","bindTooltip","on","e","document","getElementById","style","visibility","innerHTML","exist","i","length","j","name","city","elmnt","scrollIntoView","behavior","COUNTYFP","handlecheck","event","checked","setState","selected","state","check","prisonPrint","target","children","props","index","locations","hovered","componentDidMount","window","onbeforeunload","scrollTo","push","p_name","latitude","longitude","render","width","margin","display","overflow","bind","float","fontSize","border","height","features","handleMove","handleLeave","map","location","idx","click","position"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {Marker, MapContainer, GeoJSON, TileLayer, Tooltip} from \"react-leaflet\"\nimport county_ca from './../data/county_ca.json'\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet'\nimport data from './../data/markers.json'\nimport icon from './red-pin.png';\n\n\nlet DefaultIcon = L.icon({\n    iconUrl: icon,\n    iconSize:[20,20],\n    //iconAnchor:[5,10],\n    popupAnchor:[5,5]\n});\n\nL.Marker.prototype.options.icon = DefaultIcon;\n\nvar datainfo = [];\n\n\nclass MyMap extends Component {\n    constructor () {\n        super();\n        this.state = {\n            locations:[],\n            hovered:false,\n            check:false,   \n\n        };\n    }\n\n    componentDidMount() {\n\n        \n\n        window.onbeforeunload = function () {\n            window.scrollTo(0, 0);\n          }\n        // arrange data for marking and popups\n        datainfo = [];\n        for (var i = 0; i < data.length; i++) {\n            this.state.locations.push({\"name\":data[i].p_name, \"position\": [data[i].latitude, data[i].longitude], \n            \"city\":data[i].city, \"county\":data[i].county});\n            datainfo.push({\"name\":data[i].p_name, \"position\": [data[i].latitude, data[i].longitude], \n            \"city\":data[i].city, \"county\":data[i].county});\n\n            \n        }\n\n\n    }\n\n    getColor = (n) => {\n        if(n > 2){\n            return \"red\";\n        }\n        else{\n            return \"blue\";\n        }\n    \n    };\n\n    countyStyle = {\n        fillColor: \"blue\",\n        fillOpacity: .6,\n        color: \"black\",\n        weight:0.6,\n    };\n\n   \n    onEachCounty = (county, layer) =>{\n        \n        \n        const countyName = county.properties.NAME;\n\n        \n        layer.bindTooltip(`${countyName}`); // county name display.\n\n   \n        layer.on('click', function (e) {\n            document.getElementById(\"info\").style.visibility = \"visible\";\n            document.getElementById(\"info\").innerHTML = `<h2 style='text-align:center'>${countyName}</h2><strong style='padding-left:15px'>Prisons:</strong><br>`;\n\n            // document.getElementById(\"info\").innerHTML = \"Prisons: \" + \"<br>\" ;\n\n            var exist = false;\n            var i =0;\n            for( i= 0; i < datainfo.length; i++ ){\n                if(datainfo[i].county === `${countyName}`){\n                    exist = true;\n                }\n\n            }            \n\n            if(exist){\n                \n                for(var j = 0; j < datainfo.length; j++ ){\n                    if(datainfo[j].county === `${countyName}`){\n                        document.getElementById(\"info\").innerHTML += \"<li style='padding-left:25px'>\" + datainfo[j].name + \"  (City: \" + datainfo[j].city + \")</li>\" ;\n                    }\n                }\n            }\n           \n                    \n            else{\n                document.getElementById(\"info\").innerHTML += \"<span style='padding-left:25px'>No prisons to show<span>\" ;\n            }\n\n            var elmnt = document.getElementById(\"info\");\n            elmnt.scrollIntoView({behavior: \"smooth\"});\n        \n\n          });\n\n\n        if(county.properties.COUNTYFP > 34){\n            layer.options.fillColor = \"yellow\"\n        }\n    };\n\n\n    handlecheck = (event) =>{\n       \n        if(document.getElementById('chkbx').checked){\n            this.setState({\n\n                selected: !this.state.selected,\n                check:1\n            })\n        }\n        else if(!document.getElementById('chkbx').checked){\n            this.setState({\n                check:0\n            })\n        }\n    }\n\n\n    prisonPrint = (e) =>{\n\n\n        \n        document.getElementById(\"info\").style.visibility = \"visible\";\n        document.getElementById(\"info\").innerHTML = \"<h2 style='text-align:center'>\" + e.target.options.children.props.children[1] + \"<h2>\" \n        var index = 0;\n        for(var i =0; i< datainfo.length; i++){\n            if(datainfo[i].name === e.target.options.children.props.children[1]){\n                index = i;\n\n            }\n        }\n        document.getElementById(\"info\").innerHTML += \"<strong style='padding-Left: 10px'>County: </strong>\" + datainfo[index].county  + \"<br> <strong style='padding-Left: 10px'>City:</strong>\" + datainfo[index].city;\n\n        var elmnt = document.getElementById(\"info\");\n        elmnt.scrollIntoView({behavior: \"smooth\"});\n    }\n\n  \n    render() {\n        const {check} = this.state; \n       \n        return ( \n            \n            <div>\n\n                <div style = {{  width: '70%', margin:\"auto\" , display:\"block\", overflow:\"auto\"}}>\n                    \n                <input id=\"chkbx\" onChange={this.handlecheck.bind(this)} type=\"checkbox\" style={{float:\"right\"}}/> <label style={{float:\"right\", fontSize:\"14px\"}}>Show Tile Layer</label>\n                </div>\n                <MapContainer \n                \n                style = {{border:\"2px solid #393F44\", height: \"72vh\", width: '70%', margin: 'auto'}} zoom = {6} center = {[37.5, -120]} scrollWheelZoom = {true}>\n                    <GeoJSON style = {this.countyStyle} data ={county_ca.features} onEachFeature={this.onEachCounty} \n                    onMouseMove={this.handleMove} onMouseLeave={this.handleLeave} />\n                 \n                 \n                 \n                    {check ? (<TileLayer style={{visibility:\"hidden\"}}\n                    attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                    url=\"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png\"\n                    />):(\"\")}\n\n\n                    {this.state.locations.map((location,idx) => \n\n\n                        // marker and detailed display.\n                        <Marker \n                        eventHandlers={{\n                            click: (e) => {\n                              this.prisonPrint(e)\n                            \n                            },\n                          }}\n                        key={`marker-${idx}`} position={location.position}>\n\n                            <Tooltip>\n                                <span>\n                                    Prison: &nbsp;\n                                </span>\n                                {location.name}\n                                <span><br />\n                                    County: &nbsp;\n                                </span>\n                                {location.county}\n                                <span><br />\n                                    City: &nbsp;\n                                </span>\n                                {location.city}\n                                </Tooltip>\n                        </Marker>\n                    )}\n\n                </MapContainer>\n\n                \n                \n            </div>\n        );\n    }\n}\n\nexport default MyMap\n"]},"metadata":{},"sourceType":"module"}