{"ast":null,"code":"var _jsxFileName = \"/Users/mahmood/Desktop/COVID19-Hotspot-Map/frontend/hotspot-map/src/components/mymap.jsx\";\nimport React, { Component } from 'react';\nimport { MapContainer, GeoJSON, TileLayer, Tooltip, CircleMarker } from \"react-leaflet\";\nimport county_ca from './../data/county_ca.json';\nimport 'leaflet/dist/leaflet.css';\nimport data from './../data/markers.json';\nimport county_data from './../data/total_county_data.json';\nimport prison_data from './../data/total_pri_data.json';\nimport county_spec_data from './../data/county_spec_data.json';\nimport pri_spec_data from './../data/pri_spec_data.json';\nimport L from 'leaflet';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar datainfo = [];\nvar legend = L.control({\n  position: 'bottomleft'\n});\n\nlegend.onAdd = function (map) {\n  var div = L.DomUtil.create('div', 'info legend');\n  labels = ['<strong>Categories</strong>'], categories = ['Road Surface', 'Signage', 'Line Markings', 'Roadside Hazards', 'Other'];\n\n  for (var i = 0; i < categories.length; i++) {\n    div.innerHTML += labels.push('<i class=\"circle\" style=\"background:' + getColor(categories[i]) + '\"></i> ' + (categories[i] ? categories[i] : '+'));\n  }\n\n  div.innerHTML = labels.join('<br>');\n  return div;\n};\n\nlegend.addTo(map);\n\nclass MyMap extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getColor = n => {\n      if (n < 2) {\n        return \"#049ce6\"; //\"#FAF3AD\"\n      } else if (n < 5) {\n        return \"#038acc\"; //\"#F3CC71\"//\n      } else if (n < 10) {\n        return \"#0379b3\"; //\"#EEAE33\"//\n      } else if (n < 20) {\n        return \"#026899\"; //\"#DD7225\"//\n      } else {\n          return \"#025780\"; //\"#B4461F\"//\n        }\n    };\n\n    this.countyStyle = {\n      fillColor: \"grey\",\n      fillOpacity: 1.0,\n      color: \"black\",\n      weight: .6\n    };\n\n    this.onEachCounty = (county, layer) => {\n      const countyName = county.properties.NAME;\n      layer.bindTooltip(`${countyName}`); // county name display.\n\n      layer.on('click', function (e) {\n        document.getElementById(\"info\").style.visibility = \"visible\";\n        document.getElementById(\"info\").innerHTML = `<h2 style='text-align:center'>${countyName}</h2><strong style='padding-left:15px'>Prisons:</strong><br>`; // document.getElementById(\"info\").innerHTML = \"Prisons: \" + \"<br>\" ;\n\n        var exist = false;\n        var i = 0;\n\n        for (i = 0; i < datainfo.length; i++) {\n          if (datainfo[i].county === `${countyName}`) {\n            exist = true;\n          }\n        }\n\n        if (exist) {\n          for (var j = 0; j < datainfo.length; j++) {\n            if (datainfo[j].county === `${countyName}`) {\n              document.getElementById(\"info\").innerHTML += \"<li style='padding-left:25px'>\" + datainfo[j].name + \"  (City: \" + datainfo[j].city + \")</li>\";\n            }\n          }\n        } else {\n          document.getElementById(\"info\").innerHTML += \"<span style='padding-left:25px'>No prisons to show<span>\";\n        }\n\n        for (var k = 0; k < Object.keys(county_data).length; k++) {\n          if (county_data[k].county === `${countyName}`) {\n            document.getElementById(\"info\").innerHTML += \"<h3 style='text-align:center'>County Covid Data</h3><strong style='padding-Left: 10px'>Total Cases: </strong>\" + county_data[k].conf_cases + \"<br> <strong style='padding-Left: 10px'>Total Deaths: </strong>\" + county_data[k].conf_deaths;\n          }\n        }\n\n        var elmnt = document.getElementById(\"scroll_up\");\n        elmnt.scrollIntoView({\n          behavior: \"smooth\"\n        });\n      });\n\n      if (county.properties.COUNTYFP < 10) {\n        layer.options.fillColor = \"#fce49c\";\n      } else if (county.properties.COUNTYFP < 1000) {\n        layer.options.fillColor = \"#fcc960\";\n      } else if (county.properties.COUNTYFP < 10000) {\n        layer.options.fillColor = \"#fea33e\";\n      } else if (county.properties.COUNTYFP < 100000) {\n        layer.options.fillColor = \"#da6e26\";\n      } else {\n        layer.options.fillColor = \"#a2461a\";\n      }\n    };\n\n    this.handlecheck = event => {\n      if (document.getElementById('chkbx').checked) {\n        this.setState({\n          selected: !this.state.selected,\n          check: 1\n        });\n      } else if (!document.getElementById('chkbx').checked) {\n        this.setState({\n          check: 0\n        });\n      }\n    };\n\n    this.prisonPrint = e => {\n      document.getElementById(\"info\").style.visibility = \"visible\";\n      document.getElementById(\"info\").innerHTML = \"<h2 style='text-align:center'>\" + e.target._tooltip.options.children[1] + \"<h2>\";\n      var index = 0;\n\n      for (var i = 0; i < datainfo.length; i++) {\n        if (datainfo[i].name === e.target._tooltip.options.children[1]) {\n          index = i;\n        }\n      }\n\n      document.getElementById(\"info\").innerHTML += \"<strong style='padding-Left: 10px'>County: </strong>\" + datainfo[index].county + \"<br> <strong style='padding-Left: 10px'>City:</strong> \" + datainfo[index].city;\n      document.getElementById(\"info\").innerHTML += \"<h3 style='text-align:center'>Prison Covid Data<h3>\";\n\n      for (var k = 0; k < Object.keys(prison_data).length; k++) {\n        if (datainfo[index].uni_ref === prison_data[k].uni_ref) {\n          console.log(\"data array id\", datainfo[index].uni_ref);\n          console.log(\"new file\", datainfo[index].uni_ref);\n          document.getElementById(\"info\").innerHTML += \"<strong style='padding-Left: 10px'>Total Cases: </strong>\" + prison_data[k].conf_cases;\n          document.getElementById(\"info\").innerHTML += \"<br> <strong style='padding-Left: 10px'>Total Deaths: </strong>\" + prison_data[k].conf_deaths;\n        }\n      }\n\n      var elmnt = document.getElementById(\"scroll_up\");\n      elmnt.scrollIntoView({\n        behavior: \"smooth\"\n      });\n    };\n\n    this.state = {\n      locations: [],\n      hovered: false,\n      check: false\n    };\n  }\n\n  componentDidMount() {\n    console.log(county_data[1].conf_cases);\n\n    window.onbeforeunload = function () {\n      window.scrollTo(0, 0);\n    }; // arrange data for marking and popups\n\n\n    datainfo = [];\n\n    for (var i = 0; i < data.length; i++) {\n      datainfo.push({\n        \"name\": data[i].p_name,\n        \"uni_ref\": data[i].uni_ref,\n        \"position\": [data[i].latitude, data[i].longitude],\n        \"city\": data[i].city,\n        \"county\": data[i].county,\n        \"cases\": 0\n      });\n    }\n\n    for (var u = 0; u < datainfo.length; u++) {\n      for (var v = 0; v < pri_spec_data.length; v++) {\n        if (datainfo[u].name === pri_spec_data[v].p_name) {\n          datainfo[u].cases = pri_spec_data[v].new_conf_cases;\n        }\n      }\n    }\n\n    this.setState({\n      locations: datainfo\n    });\n\n    for (var m = 0; m < 58; m++) {\n      county_ca.features[m].properties.COUNTYFP = 0;\n    }\n\n    for (var k = 0; k < 58; k++) {\n      var nm = county_ca.features[k].properties.NAME;\n\n      for (var j = 0; j < county_spec_data.length; j++) {\n        if (county_spec_data[j].county === nm) {\n          county_ca.features[k].properties.COUNTYFP = county_spec_data[j].cases;\n        }\n      }\n    }\n  }\n\n  render() {\n    const {\n      check\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '70%',\n          margin: \"auto\",\n          display: \"block\",\n          overflow: \"auto\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"chkbx\",\n          onChange: this.handlecheck.bind(this),\n          type: \"checkbox\",\n          style: {\n            float: \"right\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 17\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            float: \"right\",\n            fontSize: \"14px\"\n          },\n          children: \"Show Tile Layer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 116\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n        style: {\n          border: \"2px solid #393F44\",\n          height: \"72vh\",\n          width: '70%',\n          margin: 'auto'\n        },\n        zoom: 6,\n        center: [37.5, -120],\n        scrollWheelZoom: true,\n        children: [/*#__PURE__*/_jsxDEV(GeoJSON, {\n          style: this.countyStyle,\n          data: county_ca.features,\n          onEachFeature: this.onEachCounty,\n          onMouseMove: this.handleMove,\n          onMouseLeave: this.handleLeave\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }, this), check ? /*#__PURE__*/_jsxDEV(TileLayer, {\n          style: {\n            visibility: \"hidden\"\n          },\n          attribution: \"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n          url: \"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 31\n        }, this) : \"\", this.state.locations.map((location, idx = 0) =>\n        /*#__PURE__*/\n        // marker and detailed display.\n        _jsxDEV(CircleMarker, {\n          eventHandlers: {\n            click: e => {\n              this.prisonPrint(e);\n            }\n          },\n          center: location.position,\n          fillOpacity: 1.0,\n          color: \"black\",\n          weight: 0.5,\n          fillColor: this.getColor(this.state.locations[idx].cases),\n          children: /*#__PURE__*/_jsxDEV(Tooltip, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Prison: \\xA0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 33\n            }, this), location.name, /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 39\n              }, this), \"County: \\xA0\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 33\n            }, this), location.county, /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 39\n              }, this), \"City: \\xA0\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 33\n            }, this), location.city]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 29\n          }, this)\n        }, `marker-${idx}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default MyMap;","map":{"version":3,"sources":["/Users/mahmood/Desktop/COVID19-Hotspot-Map/frontend/hotspot-map/src/components/mymap.jsx"],"names":["React","Component","MapContainer","GeoJSON","TileLayer","Tooltip","CircleMarker","county_ca","data","county_data","prison_data","county_spec_data","pri_spec_data","L","datainfo","legend","control","position","onAdd","map","div","DomUtil","create","labels","categories","i","length","innerHTML","push","getColor","join","addTo","MyMap","constructor","props","n","countyStyle","fillColor","fillOpacity","color","weight","onEachCounty","county","layer","countyName","properties","NAME","bindTooltip","on","e","document","getElementById","style","visibility","exist","j","name","city","k","Object","keys","conf_cases","conf_deaths","elmnt","scrollIntoView","behavior","COUNTYFP","options","handlecheck","event","checked","setState","selected","state","check","prisonPrint","target","_tooltip","children","index","uni_ref","console","log","locations","hovered","componentDidMount","window","onbeforeunload","scrollTo","p_name","latitude","longitude","u","v","cases","new_conf_cases","m","features","nm","render","width","margin","display","overflow","bind","float","fontSize","border","height","handleMove","handleLeave","location","idx","click"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { MapContainer, GeoJSON, TileLayer, Tooltip, CircleMarker} from \"react-leaflet\";\nimport county_ca from './../data/county_ca.json';\nimport 'leaflet/dist/leaflet.css';\nimport data from './../data/markers.json';\nimport county_data from './../data/total_county_data.json';\nimport prison_data from './../data/total_pri_data.json';\nimport county_spec_data from './../data/county_spec_data.json';\nimport pri_spec_data from './../data/pri_spec_data.json';\nimport L from 'leaflet';\n\n\nvar datainfo = [];\n\nvar legend = L.control({position: 'bottomleft'});\nlegend.onAdd = function (map) {\n\nvar div = L.DomUtil.create('div', 'info legend');\nlabels = ['<strong>Categories</strong>'],\ncategories = ['Road Surface','Signage','Line Markings','Roadside Hazards','Other'];\n\nfor (var i = 0; i < categories.length; i++) {\n\n        div.innerHTML += \n        labels.push(\n            '<i class=\"circle\" style=\"background:' + getColor(categories[i]) + '\"></i> ' +\n        (categories[i] ? categories[i] : '+'));\n\n    }\n    div.innerHTML = labels.join('<br>');\nreturn div;\n};\nlegend.addTo(map);\n\nclass MyMap extends Component {\n    constructor (props) {\n        super(props);\n        this.state = {\n            locations:[],\n            hovered:false,\n            check:false,   \n\n        };\n    }\n\n    componentDidMount() {\n\n       console.log(county_data[1].conf_cases);\n\n        window.onbeforeunload = function () {\n            window.scrollTo(0, 0);\n          }\n        // arrange data for marking and popups\n        datainfo = [];\n        for (var i = 0; i < data.length; i++) {\n\n            datainfo.push({\"name\":data[i].p_name, \"uni_ref\": data[i].uni_ref, \"position\": [data[i].latitude, data[i].longitude], \n            \"city\":data[i].city, \"county\":data[i].county, \"cases\":0});\n        }\n        for (var u = 0; u < datainfo.length; u++) {\n            for (var v = 0; v < pri_spec_data.length; v++) {\n                if (datainfo[u].name === pri_spec_data[v].p_name) {\n                    datainfo[u].cases = pri_spec_data[v].new_conf_cases\n                }\n\n            }\n\n\n        }\n        this.setState({locations:datainfo});\n\n        for (var m = 0; m < 58; m++) {\n            county_ca.features[m].properties.COUNTYFP = 0\n\n    }\n\n    for (var k = 0; k < 58; k++) {\n        var nm = county_ca.features[k].properties.NAME;\n        for (var j = 0; j < county_spec_data.length; j++) {\n            if (county_spec_data[j].county === nm) {\n                county_ca.features[k].properties.COUNTYFP = county_spec_data[j].cases\n            }\n        }\n    }\n\n    }\n    getColor = (n) => {\n \n        if(n < 2) {\n            return \"#049ce6\"//\"#FAF3AD\"\n        }\n        else if(n < 5) {\n            return \"#038acc\"//\"#F3CC71\"//\n        }\n        else if(n < 10) {\n            return \"#0379b3\"//\"#EEAE33\"//\n        }\n        else if(n < 20) {\n            return \"#026899\"//\"#DD7225\"//\n        }\n        else {\n            return \"#025780\"//\"#B4461F\"//\n        }\n\n    };\n\n    countyStyle = {\n        fillColor: \"grey\",\n        fillOpacity: 1.0,\n        color: \"black\",\n        weight:.6,\n\n    };\n\n   \n    onEachCounty = (county, layer) =>{\n        \n        const countyName = county.properties.NAME;\n\n        layer.bindTooltip(`${countyName}`); // county name display.\n\n\n        layer.on('click', function (e) {\n            document.getElementById(\"info\").style.visibility = \"visible\";\n            document.getElementById(\"info\").innerHTML = `<h2 style='text-align:center'>${countyName}</h2><strong style='padding-left:15px'>Prisons:</strong><br>`;\n\n            // document.getElementById(\"info\").innerHTML = \"Prisons: \" + \"<br>\" ;\n\n            var exist = false;\n            var i =0;\n            for( i= 0; i < datainfo.length; i++ ){\n                if(datainfo[i].county === `${countyName}`){\n                    exist = true;\n                }\n            }            \n\n            if(exist){\n                for(var j = 0; j < datainfo.length; j++ ){\n                    if(datainfo[j].county === `${countyName}`){\n                        document.getElementById(\"info\").innerHTML += \"<li style='padding-left:25px'>\" + datainfo[j].name + \"  (City: \" + datainfo[j].city + \")</li>\";\n            \n                    }\n                }\n            }       \n            else{\n                document.getElementById(\"info\").innerHTML += \"<span style='padding-left:25px'>No prisons to show<span>\"\n            }\n\n            for(var k = 0; k < Object.keys(county_data).length; k++){\n                if(county_data[k].county === `${countyName}`){\n                    document.getElementById(\"info\").innerHTML +=  \"<h3 style='text-align:center'>County Covid Data</h3><strong style='padding-Left: 10px'>Total Cases: </strong>\" + county_data[k].conf_cases + \"<br> <strong style='padding-Left: 10px'>Total Deaths: </strong>\" + county_data[k].conf_deaths;\n                }\n            }\n\n            var elmnt = document.getElementById(\"scroll_up\");\n            elmnt.scrollIntoView({behavior: \"smooth\"});\n          });\n\n        if(county.properties.COUNTYFP < 10) {\n            layer.options.fillColor = \"#fce49c\"\n        }\n        else if(county.properties.COUNTYFP < 1000) {\n            layer.options.fillColor = \"#fcc960\"\n        }\n        else if(county.properties.COUNTYFP < 10000) {\n            layer.options.fillColor = \"#fea33e\"\n        }\n        else if(county.properties.COUNTYFP < 100000) {\n            layer.options.fillColor = \"#da6e26\"\n        }\n        else {\n            layer.options.fillColor = \"#a2461a\"\n        }\n    };\n\n\n    handlecheck = (event) =>{\n       \n        if(document.getElementById('chkbx').checked){\n            this.setState({\n\n                selected: !this.state.selected,\n                check:1\n            })\n        }\n        else if(!document.getElementById('chkbx').checked){\n            this.setState({\n                check:0\n            })\n        }\n    }\n\n    prisonPrint = (e) =>{\n\n        document.getElementById(\"info\").style.visibility = \"visible\";\n        document.getElementById(\"info\").innerHTML = \"<h2 style='text-align:center'>\" + e.target._tooltip.options.children[1] + \"<h2>\" ;\n        var index = 0;\n        \n        for(var i =0; i< datainfo.length; i++){\n            if(datainfo[i].name === e.target._tooltip.options.children[1]){\n                index = i;\n            }\n        }\n        document.getElementById(\"info\").innerHTML += \"<strong style='padding-Left: 10px'>County: </strong>\" + datainfo[index].county  + \"<br> <strong style='padding-Left: 10px'>City:</strong> \" + datainfo[index].city;\n\n        document.getElementById(\"info\").innerHTML +=  \"<h3 style='text-align:center'>Prison Covid Data<h3>\";\n        for(var k = 0; k < Object.keys(prison_data).length; k++){\n            \n            if(datainfo[index].uni_ref === prison_data[k].uni_ref ){\n                console.log(\"data array id\", datainfo[index].uni_ref)\n                console.log(\"new file\", datainfo[index].uni_ref)\n                document.getElementById(\"info\").innerHTML +=  \"<strong style='padding-Left: 10px'>Total Cases: </strong>\" + prison_data[k].conf_cases;\n                document.getElementById(\"info\").innerHTML +=  \"<br> <strong style='padding-Left: 10px'>Total Deaths: </strong>\" + prison_data[k].conf_deaths;\n            }\n        }\n        var elmnt = document.getElementById(\"scroll_up\");\n        elmnt.scrollIntoView({behavior: \"smooth\"});\n    }\n  \n    render() {\n        const {check} = this.state; \n       \n        return ( \n            \n            <div>\n\n                <div style = {{  width: '70%', margin:\"auto\" , display:\"block\", overflow:\"auto\"}}>\n                    \n                <input id=\"chkbx\" onChange={this.handlecheck.bind(this)} type=\"checkbox\" style={{float:\"right\"}}/> <label style={{float:\"right\", fontSize:\"14px\"}}>Show Tile Layer</label>\n                </div>\n                <MapContainer \n                \n                style = {{border:\"2px solid #393F44\", height: \"72vh\", width: '70%', margin: 'auto'}} zoom = {6} center = {[37.5, -120]} scrollWheelZoom = {true}>\n                    <GeoJSON style = {this.countyStyle} data ={county_ca.features} onEachFeature={this.onEachCounty} \n                    onMouseMove={this.handleMove} onMouseLeave={this.handleLeave} />\n                 \n                    {check ? (<TileLayer style={{visibility:\"hidden\"}}\n                    attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                    url=\"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png\"\n                    />):(\"\")}\n\n                        {this.state.locations.map((location,idx=0) =>  \n\n                        // marker and detailed display.\n                        <CircleMarker\n                        eventHandlers={{ click: (e) => {this.prisonPrint(e)}, }}\n\n    \n                            key={`marker-${idx}`}\n                            center={location.position}\n                            fillOpacity={1.0}\n                        \n                            color=\"black\"\n                            weight={0.5}\n                            fillColor={this.getColor(this.state.locations[idx].cases)}\n    \n                            >\n                            <Tooltip>\n                                <span>\n                                    Prison: &nbsp;\n                                </span>\n                                {location.name}\n                                <span><br />\n                                    County: &nbsp;\n                                </span>\n                                {location.county}\n                                <span><br />\n                                    City: &nbsp;\n                                </span>\n                                {location.city}\n                                </Tooltip>\n                                </CircleMarker>\n                    )}\n                    \n\n                </MapContainer>\n            </div>\n        );\n    }\n}\n\nexport default MyMap\n"]},"metadata":{},"sourceType":"module"}